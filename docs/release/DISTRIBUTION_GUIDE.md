# Attendance Tool 配布ガイド

## 配布パッケージ構成

### 1. インストーラー版（推奨）
- **ファイル名**: `AttendanceTool-0.1.0-Setup.exe`
- **説明**: NSIS自動インストーラー
- **特徴**: 
  - 自動的にシステムにインストール
  - スタートメニュー・デスクトップショートカット作成
  - アンインストール機能付き
  - レジストリ登録による適切な管理

### 2. ポータブル版
- **ファイル名**: 
  - `attendance-tool-gui.exe` (GUI版)
  - `attendance-tool-cli.exe` (CLI版)
- **説明**: 単一実行ファイル
- **特徴**:
  - システムインストール不要
  - USBメモリ等での持ち運び可能
  - レジストリ変更なし

### 3. 付属ドキュメント
- `README.md`: 基本的な使用方法
- `VERSION.txt`: バージョン情報・ビルド情報
- `config_samples/`: 設定ファイルサンプル

## ビルド手順

### 前提条件
- Windows 10/11 (64bit)
- Python 3.8以降
- Git（ソースコード取得用）

### 1. ソースコード取得
```bash
git clone https://github.com/kumab2221/attendance-tool.git
cd attendance-tool
```

### 2. 自動ビルド（推奨）
```bash
# build.batを実行（Windows）
build_scripts\build.bat
```

### 3. 手動ビルド
```bash
# 仮想環境作成
python -m venv build_env
build_env\Scripts\activate

# 依存関係インストール
pip install -r requirements-build.txt
pip install -e .

# ビルド実行
python build_scripts\build_exe.py
```

### 4. インストーラー作成（オプション）
```bash
# NSISが必要
makensis build_scripts\create_installer.nsi
```

## 配布前チェックリスト

### ✅ ファイル確認
- [ ] 実行ファイルのサイズが適切（50MB以下推奨）
- [ ] 必要な依存ファイルが含まれている
- [ ] README.mdが最新の情報に更新されている
- [ ] VERSION.txtにビルド情報が正しく記録されている

### ✅ 機能テスト
- [ ] GUI版の基本動作確認
- [ ] CLI版の基本動作確認
- [ ] サンプルデータでの集計処理確認
- [ ] エラーハンドリングの動作確認

### ✅ 互換性テスト
- [ ] Windows 10での動作確認
- [ ] Windows 11での動作確認
- [ ] 異なるユーザー権限での動作確認
- [ ] 日本語・英語環境での動作確認

### ✅ セキュリティチェック
- [ ] ウイルススキャンの実行
- [ ] コード署名（証明書がある場合）
- [ ] 個人情報保護機能の確認

## 配布方法

### 1. GitHub Releases
```bash
# タグ作成
git tag -a v0.1.0 -m "Release version 0.1.0"
git push origin v0.1.0

# GitHubでRelease作成
# - リリースノートを添付
# - バイナリファイルをアップロード
```

### 2. 社内配布
- **配布パッケージ**: インストーラー版を推奨
- **配布方法**: 
  - 社内ファイルサーバー
  - メール配布（サイズ制限注意）
  - 社内ポータルサイト

### 3. 外部配布
- **ライセンス確認**: MIT License適用
- **ドキュメント整備**: 英語版ドキュメント準備
- **サポート体制**: 問い合わせ先の明記

## ファイルサイズ最適化

### PyInstallerオプション
- `--onefile`: 単一実行ファイル化
- `--windowed`: GUI版ではコンソールウィンドウ非表示
- `--exclude-module`: 不要なモジュールの除外
- `--upx-dir`: UPX圧縮の使用（オプション）

### 容量削減のコツ
1. **不要な依存関係の除外**
   ```python
   # build_exe.pyで除外設定
   excludes = ['tkinter.test', 'unittest', 'pdb']
   ```

2. **データファイルの最適化**
   - 設定ファイルの軽量化
   - 不要なテンプレートファイル削除

3. **圧縮オプション**
   - UPX使用による実行ファイル圧縮
   - ZIP圧縮での配布

## バージョン管理

### セマンティックバージョニング
- **MAJOR**: 互換性のない変更
- **MINOR**: 後方互換性のある機能追加
- **PATCH**: 後方互換性のあるバグ修正

### バージョン更新手順
1. `src/attendance_tool/__init__.py`の`__version__`更新
2. `CHANGELOG.md`に変更内容記録
3. `pyproject.toml`のバージョン更新
4. テスト実行・動作確認
5. タグ作成・リリース

## リリース後の対応

### 1. ユーザーサポート
- **問題報告の受付**: GitHub Issues
- **FAQ更新**: よくある質問の蓄積
- **ドキュメント改善**: ユーザーフィードバック反映

### 2. 品質改善
- **バグフィックス**: 緊急度に応じたパッチリリース
- **パフォーマンス改善**: ユーザー環境での問題対応
- **機能追加**: ユーザー要望の検討・実装

### 3. 次期バージョン計画
- **ロードマップ作成**: 機能追加計画
- **開発スケジュール**: リリースサイクル計画
- **後方互換性**: 既存ユーザーへの配慮

## トラブルシューティング

### ビルドエラー
- **依存関係の問題**: `pip freeze`で環境確認
- **パス問題**: 絶対パス使用の検討
- **権限問題**: 管理者権限での実行

### 実行エラー
- **DLL不足**: 必要なランタイムの確認
- **パス問題**: 実行ファイルと同じディレクトリでの実行テスト
- **権限問題**: ユーザー権限での動作確認

---

このガイドは開発チーム向けの内部文書です。
配布前には必ずすべての項目を確認してください。